{% load static %}

<div class="d-flex mt-3">
    <button class="btn d-flex align-items-center justify-content-center rounded-pill button-small-square"
            onclick="toggleReplyForm('{{ comment.id }}')">

        <p class="mb-0 text-dark text-tertiary font-weight-bold">Reply</p>
    </button>

    <button class="btn d-flex align-items-center justify-content-center rounded-pill button-small-square ml-2"
            onclick="copyUrl('{{ comment.id }}')">

        <p class="mb-0 text-dark text-tertiary font-weight-bold">Share</p>
    </button>


    {% if comment.replies.exists %}

        <button id="btn-{{ comment.id }}" 
                class="btn d-flex align-items-center justify-content-center rounded-pill button-small-square ml-2"
                onclick="toggleReplies('{{ comment.id }}')">

            <span id="btn-text-{{ comment.id }}" class="mb-0 text-dark text-tertiary font-weight-bold">
                Show replies
            </span>
        </button>

    {% endif %}

    {% if comment.author.id == user.id %}

        <form action="/comment/{{ comment.id }}/delete/" method="post"> {% csrf_token %}
            <button type="submit" class="btn d-flex align-items-center justify-content-center rounded-circle button-small-circle ml-2">
                <i class="fas fa-fw fa-trash-alt text-dark text-content"></i>
            </button>
        </form>

        <a href="#" class="btn d-flex align-items-center justify-content-center rounded-circle button-small-circle ml-2">
            <i class="fas fa-fw fa-pen-alt text-dark text-content"></i>
        </a>

    {% else %}

        <a href="#" class="btn d-flex align-items-center justify-content-center rounded-pill button-small-square ml-2">
            <p class="mb-0 text-dark text-tertiary font-weight-bold">Report</p>
        </a>

    {% endif %}


    <a href="/comment/{{ comment.id }}" class="btn d-flex align-items-center justify-content-center rounded-pill button-small-square ml-2">
        <p class="mb-0 text-dark text-tertiary font-weight-bold">View</p>
    </a>
</div>

<div id="reply-form-{{ comment.id }}" class="mt-2 d-none mr-5">
    <form method="post" action="{% url 'comment' %}" class="w-100 reply-form"> {% csrf_token %}
        <div class="comment-box">
            <textarea 
                class="form-control rounded comment-form"
                name="content" 
                rows="2" 
                placeholder="Write your reply..."
                required></textarea>

            <input type="hidden" name="post" value="{{ comment.post.id }}">
            <input type="hidden" name="parent" value="{{ comment.id }}">

            <div class="comment-actions">
                <button type="button" 
                        class="btn d-flex align-items-center justify-content-center rounded-pill button-small-square" 
                        onclick="toggleReplyForm('{{ comment.id }}')">
                    <span class="text-tertiary text-dark font-weight-bold">Cancel</span>
                </button>

                <button type="submit"
                        class="btn text-dark d-flex align-items-center justify-content-center rounded-circle p-0 button-small-circle">
                    <i class="fas fa-fw fa-paper-plane text-tertiary"></i>
                </button>
            </div>
        </div>
    </form>
</div>
